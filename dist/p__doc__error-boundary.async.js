"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[883],{12142:function(r,e,n){n.r(e);var o=n(88811),t=n(93181),s=n(40658),l=n(1413),d=n(62410),i=n(33056),a=n(85791),c=n(29090),u=n(77797),x=n(1058),h=n(67365),y=(n(75271),n(52676)),j=s.Z.Title,p=s.Z.Paragraph,m=s.Z.Text;e.default=function(){var r=[{title:"åŠŸèƒ½ç‰¹æ€§",dataIndex:"feature",key:"feature",width:120,render:function(r){return(0,y.jsx)(m,{strong:!0,children:r})}},{title:"åŸç”Ÿ ErrorBoundary",dataIndex:"nativeErrorBoundary",key:"nativeErrorBoundary",render:function(r,e){return(0,y.jsxs)(l.Z,{children:["nativeErrorBoundary"===e.winner&&(0,y.jsx)(o.Z,{style:{color:"#52c41a"}}),"react-error-boundary"===e.winner&&(0,y.jsx)(t.Z,{style:{color:"#ff4d4f"}}),(0,y.jsx)("span",{children:r})]})}},{title:"react-error-boundary",dataIndex:"reactErrorBoundary",key:"reactErrorBoundary",render:function(r,e){return(0,y.jsxs)(l.Z,{children:["react-error-boundary"===e.winner&&(0,y.jsx)(o.Z,{style:{color:"#52c41a"}}),"nativeErrorBoundary"===e.winner&&(0,y.jsx)(t.Z,{style:{color:"#ff4d4f"}}),(0,y.jsx)("span",{children:r})]})}}],e=[{title:"å±æ€§å",dataIndex:"prop",key:"prop",width:150,render:function(r){return(0,y.jsx)(m,{code:!0,children:r})}},{title:"ç±»å‹",dataIndex:"type",key:"type",width:200,render:function(r){return(0,y.jsx)(m,{type:"secondary",children:r})}},{title:"è¯´æ˜",dataIndex:"description",key:"description"},{title:"å¿…å¡«",dataIndex:"required",key:"required",width:80,render:function(r){return(0,y.jsx)(d.Z,{color:r?"red":"green",children:r?"æ˜¯":"å¦"})}}];return(0,y.jsxs)("div",{style:{padding:"24px"},children:[(0,y.jsxs)(j,{level:1,children:[(0,y.jsx)(t.Z,{style:{marginRight:8}}),"React Error Boundary å®Œæ•´æŒ‡å—"]}),(0,y.jsx)(i.Z,{message:"å®˜æ–¹æ¨è",description:"react-error-boundary æ˜¯ React å®˜æ–¹æ¨èçš„é”™è¯¯è¾¹ç•Œè§£å†³æ–¹æ¡ˆï¼Œç›¸æ¯”è‡ªå®šä¹‰å®ç°æ›´å®Œå–„ä¸”æ˜“ç”¨ã€‚",type:"info",showIcon:!0,style:{marginBottom:24}}),(0,y.jsx)(a.Z,{title:"ğŸ“Š åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”",style:{marginBottom:24},children:(0,y.jsx)(c.Z,{dataSource:[{key:"1",feature:"é”™è¯¯æ•è·",nativeErrorBoundary:"ä»…æ•è·å­ç»„ä»¶é”™è¯¯",reactErrorBoundary:"å¢å¼ºçš„é”™è¯¯æ•è·æœºåˆ¶",winner:"react-error-boundary"},{key:"2",feature:"é”™è¯¯æ¢å¤",nativeErrorBoundary:"éœ€è¦æ‰‹åŠ¨å®ç°æ¢å¤é€»è¾‘",reactErrorBoundary:"å†…ç½® resetErrorBoundary æ–¹æ³•",winner:"react-error-boundary"},{key:"3",feature:"é‡ç½®æœºåˆ¶",nativeErrorBoundary:"æ— å†…ç½®é‡ç½®åŠŸèƒ½",reactErrorBoundary:"æ”¯æŒ resetKeys è‡ªåŠ¨é‡ç½®",winner:"react-error-boundary"},{key:"4",feature:"é”™è¯¯ä¸ŠæŠ¥",nativeErrorBoundary:"éœ€è¦é¢å¤–é…ç½®",reactErrorBoundary:"å†…ç½® onError å›è°ƒ",winner:"react-error-boundary"},{key:"5",feature:"TypeScript",nativeErrorBoundary:"éœ€è¦è‡ªå®šä¹‰ç±»å‹å®šä¹‰",reactErrorBoundary:"å®Œæ•´çš„ TypeScript æ”¯æŒ",winner:"react-error-boundary"},{key:"6",feature:"å¼€å‘ä½“éªŒ",nativeErrorBoundary:"é…ç½®å¤æ‚ï¼Œä»£ç å†—é•¿",reactErrorBoundary:"API ç®€æ´ï¼Œå¼€ç®±å³ç”¨",winner:"react-error-boundary"}],columns:r,pagination:!1,size:"middle"})}),(0,y.jsxs)(u.Z,{gutter:[16,16],style:{marginBottom:24},children:[(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsxs)(a.Z,{title:"ğŸ“¦ å®‰è£…",style:{height:"100%"},children:[(0,y.jsx)(j,{level:4,children:"NPM"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"npm install react-error-boundary"})}),(0,y.jsx)(j,{level:4,children:"Yarn"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"yarn add react-error-boundary"})}),(0,y.jsx)(j,{level:4,children:"PNPM"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"pnpm add react-error-boundary"})})]})}),(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsxs)(a.Z,{title:"ğŸš€ åŸºç¡€ç”¨æ³•",style:{height:"100%"},children:[(0,y.jsx)(j,{level:4,children:"åŸºæœ¬å°è£…"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"import ErrorBoundary from react-error-boundary;"})}),(0,y.jsx)(j,{level:4,children:"æ ¸å¿ƒç‰¹æ€§"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"å¢å¼ºçš„é”™è¯¯æ•è·æœºåˆ¶"}),(0,y.jsx)("li",{children:"å†…ç½®é”™è¯¯æ¢å¤åŠŸèƒ½"}),(0,y.jsx)("li",{children:"æ”¯æŒè‡ªåŠ¨é‡ç½®"}),(0,y.jsx)("li",{children:"å®Œæ•´çš„ TypeScript æ”¯æŒ"}),(0,y.jsx)("li",{children:"ç®€æ´çš„ API è®¾è®¡"})]})]})})]}),(0,y.jsx)(a.Z,{title:"âš™ï¸ æ ¸å¿ƒ Props è¯¦è§£",style:{marginBottom:24},children:(0,y.jsx)(c.Z,{dataSource:[{prop:"FallbackComponent",type:"React.ComponentType<FallbackProps>",description:"é”™è¯¯æ—¶æ˜¾ç¤ºçš„ç»„ä»¶",required:!1},{prop:"fallbackRender",type:"(props: FallbackProps) => ReactNode",description:"æ›¿ä»£ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°",required:!1},{prop:"onError",type:"(error: Error, info: { componentStack: string }) => void",description:"é”™è¯¯æ•è·å›è°ƒå‡½æ•°",required:!1},{prop:"onReset",type:"() => void",description:"é‡ç½®æ—¶è§¦å‘çš„å›è°ƒ",required:!1},{prop:"resetKeys",type:"Array<any>",description:"å˜åŒ–æ—¶ä¼šè§¦å‘é‡ç½®çš„ä¾èµ–æ•°ç»„",required:!1}],columns:e,pagination:!1,size:"middle"})}),(0,y.jsxs)(u.Z,{gutter:[16,16],style:{marginBottom:24},children:[(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsxs)(a.Z,{title:"ğŸ¯ åŸºç¡€å®ç°",style:{height:"100%"},children:[(0,y.jsx)(j,{level:4,children:"é”™è¯¯å›é€€ç»„ä»¶"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:'function ErrorFallback({ error, resetErrorBoundary }: {\n  error: Error;\n  resetErrorBoundary: () => void;\n}) {\n  return (\n    <div role="alert">\n      <h3>å‡ºé”™äº†</h3>\n      <pre>{error.message}</pre>\n      <button onClick={resetErrorBoundary}>é‡è¯•</button>\n    </div>\n  );\n}'})}),(0,y.jsx)(j,{level:4,children:"åŸºæœ¬ä½¿ç”¨"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"function App() {\n  return (\n    <ErrorBoundary\n      FallbackComponent={ErrorFallback}\n      onReset={() => window.location.reload()}\n    >\n      <YourComponent />\n    </ErrorBoundary>\n  );\n}"})})]})}),(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsxs)(a.Z,{title:"ğŸ”„ é”™è¯¯æ¢å¤æœºåˆ¶",style:{height:"100%"},children:[(0,y.jsx)(j,{level:4,children:"å±€éƒ¨æ¢å¤"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"function Example() {\n  const [shouldFail, setShouldFail] = useState(false);\n  \n  return (\n    <ErrorBoundary\n      FallbackComponent={ErrorFallback}\n      onReset={() => setShouldFail(false)}\n      resetKeys={[shouldFail]}\n    >\n      {shouldFail ? <BuggyComponent /> : \n       <button onClick={() => setShouldFail(true)}>è§¦å‘é”™è¯¯</button>}\n    </ErrorBoundary>\n  );\n}"})}),(0,y.jsx)(j,{level:4,children:"è‡ªåŠ¨é‡ç½®"}),(0,y.jsxs)(p,{children:["é€šè¿‡ ",(0,y.jsx)(m,{code:!0,children:"resetKeys"})," å®ç°ä¾èµ–å˜åŒ–æ—¶çš„è‡ªåŠ¨é‡ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨é‡ç½®å‡½æ•°ã€‚"]})]})})]}),(0,y.jsx)(h.Z,{}),(0,y.jsx)(a.Z,{title:"ğŸ”§ UmiMax é›†æˆæ–¹æ¡ˆ",style:{marginBottom:24},children:(0,y.jsxs)(u.Z,{gutter:[24,16],children:[(0,y.jsxs)(x.Z,{xs:24,md:8,children:[(0,y.jsx)(j,{level:4,children:"å…¨å±€é”™è¯¯è¾¹ç•Œ"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"// app.tsx\nexport function rootContainer(container: React.ReactNode) {\n  return (\n    <ErrorBoundary FallbackComponent={GlobalErrorFallback}>\n      {container}\n    </ErrorBoundary>\n  );\n}"})})]}),(0,y.jsxs)(x.Z,{xs:24,md:8,children:[(0,y.jsx)(j,{level:4,children:"è·¯ç”±çº§é”™è¯¯è¾¹ç•Œ"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"// config/routes.ts\nexport default [\n  {\n    path: '/user',\n    component: '@/pages/User',\n    errorBoundary: '@/components/UserErrorBoundary'\n  }\n]"})})]}),(0,y.jsxs)(x.Z,{xs:24,md:8,children:[(0,y.jsx)(j,{level:4,children:"API è¯·æ±‚é”™è¯¯å¤„ç†"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"import { useErrorBoundary } from 'react-error-boundary';\n\nfunction UserProfile() {\n  const { showBoundary } = useErrorBoundary();\n\n  const fetchData = async () => {\n    try {\n      await fetch('/api/user');\n    } catch (err) {\n      showBoundary(err);\n    }\n  };\n}"})})]})]})}),(0,y.jsxs)(a.Z,{title:"ğŸš€ é«˜çº§ç”¨æ³•",style:{marginBottom:24},children:[(0,y.jsxs)(u.Z,{gutter:[16,16],children:[(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsx)(a.Z,{title:"ğŸ”— åµŒå¥—è¾¹ç•Œ",size:"small",children:(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"<ErrorBoundary FallbackComponent={ParentFallback}>\n  <ComponentA />\n  <ErrorBoundary FallbackComponent={ChildFallback}>\n    <ComponentB />\n  </ErrorBoundary>\n</ErrorBoundary>"})})})}),(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsx)(a.Z,{title:"ğŸ“Š é”™è¯¯ä¸ŠæŠ¥é›†æˆ",size:"small",children:(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"<ErrorBoundary\n  onError={(error, info) => {\n    Sentry.captureException(error, { extra: { info } });\n    fetch('/log-error', { \n      method: 'POST',\n      body: JSON.stringify({ error: error.stack, componentStack: info.componentStack })\n    });\n  }}\n>\n  <App />\n</ErrorBoundary>"})})})})]}),(0,y.jsxs)(u.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsx)(a.Z,{title:"ğŸ”„ é‡ç½®ä¾èµ–ç¤ºä¾‹",size:"small",children:(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"function ProductPage({ productId }: { productId: string }) {\n  return (\n    <ErrorBoundary\n      FallbackComponent={ErrorFallback}\n      resetKeys={[productId]}\n    >\n      <ProductDetails productId={productId} />\n    </ErrorBoundary>\n  );\n}"})})})}),(0,y.jsx)(x.Z,{xs:24,lg:12,children:(0,y.jsx)(a.Z,{title:"ğŸ£ å¼‚æ­¥é”™è¯¯æ•è· Hook",size:"small",children:(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"export function useAsyncTask() {\n  const { showBoundary } = useErrorBoundary();\n\n  const runSafe = async <T,>(task: Promise<T>): Promise<T | undefined> => {\n    try {\n      return await task;\n    } catch (error) {\n      showBoundary(error);\n    }\n  };\n\n  return { runSafe };\n}"})})})})]})]}),(0,y.jsx)(a.Z,{title:"ğŸ› ï¸ å®ç”¨å·¥å…·å‡½æ•°",style:{marginBottom:24},children:(0,y.jsxs)(u.Z,{gutter:[16,16],children:[(0,y.jsxs)(x.Z,{xs:24,lg:12,children:[(0,y.jsx)(j,{level:4,children:"é€šç”¨é”™è¯¯å›é€€ç»„ä»¶"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:'export function ErrorFallback({\n  error,\n  resetErrorBoundary,\n  customMessage\n}: {\n  error: Error;\n  resetErrorBoundary: () => void;\n  customMessage?: string;\n}) {\n  return (\n    <div className="error-fallback">\n      <Alert type="error" \n        message={customMessage || \'å‘ç”Ÿé”™è¯¯\'} \n        description={<pre>{error.message}</pre>}\n      />\n      <Space>\n        <Button onClick={resetErrorBoundary}>é‡è¯•</Button>\n        <Button onClick={() => window.location.reload()}>åˆ·æ–°é¡µé¢</Button>\n      </Space>\n    </div>\n  );\n}'})})]}),(0,y.jsxs)(x.Z,{xs:24,lg:12,children:[(0,y.jsx)(j,{level:4,children:"TypeScript ç±»å‹å®šä¹‰"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"interface FallbackProps {\n  error: Error;\n  resetErrorBoundary: (...args: Array<unknown>) => void;\n}\n\ninterface ErrorBoundaryProps {\n  FallbackComponent?: React.ComponentType<FallbackProps>;\n  fallbackRender?: (props: FallbackProps) => ReactNode;\n  onError?: (error: Error, info: { componentStack: string }) => void;\n  onReset?: () => void;\n  resetKeys?: Array<any>;\n}"})})]})]})}),(0,y.jsxs)(a.Z,{title:"ğŸ’¡ æœ€ä½³å®è·µå»ºè®®",children:[(0,y.jsxs)(u.Z,{gutter:[16,16],children:[(0,y.jsxs)(x.Z,{xs:24,md:8,children:[(0,y.jsx)(j,{level:4,children:"åˆ†å±‚å¤„ç†"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"å…¨å±€è¾¹ç•Œå¤„ç†æ„å¤–å´©æºƒ"}),(0,y.jsx)("li",{children:"è·¯ç”±è¾¹ç•Œå¤„ç†é¡µé¢çº§é”™è¯¯"}),(0,y.jsx)("li",{children:"ç»„ä»¶è¾¹ç•Œå¤„ç†å…³é”®UIéƒ¨åˆ†"})]})]}),(0,y.jsxs)(x.Z,{xs:24,md:8,children:[(0,y.jsx)(j,{level:4,children:"é”™è¯¯æ¢å¤"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"ç®€å•åœºæ™¯ï¼šresetErrorBoundary å±€éƒ¨æ¢å¤"}),(0,y.jsx)("li",{children:"å¤æ‚çŠ¶æ€ï¼šé€šè¿‡ resetKeys è‡ªåŠ¨é‡ç½®"}),(0,y.jsx)("li",{children:"å½»åº•å¤±è´¥ï¼šå¼•å¯¼ç”¨æˆ·åˆ·æ–°é¡µé¢"})]})]}),(0,y.jsxs)(x.Z,{xs:24,md:8,children:[(0,y.jsx)(j,{level:4,children:"å¼€å‘ä½“éªŒ"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"å¼€å‘ç¯å¢ƒæ˜¾ç¤ºè¯¦ç»†é”™è¯¯"}),(0,y.jsx)("li",{children:"ç”Ÿäº§ç¯å¢ƒæä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯"}),(0,y.jsx)("li",{children:"é›†æˆé”™è¯¯ç›‘æ§å’Œä¸ŠæŠ¥"})]})]})]}),(0,y.jsx)(h.Z,{}),(0,y.jsx)(j,{level:4,children:"ç¯å¢ƒé€‚é…ç¤ºä¾‹"}),(0,y.jsx)(p,{children:(0,y.jsx)(m,{code:!0,children:"<ErrorBoundary\n  FallbackComponent={process.env.NODE_ENV === 'development' ? \n    DevErrorFallback : ProdErrorFallback}\n>\n  <App />\n</ErrorBoundary>"})}),(0,y.jsx)(i.Z,{message:"æ€»ç»“",description:"é€šè¿‡åˆç†é…ç½®ï¼Œreact-error-boundary å¯ä»¥è¦†ç›– 90% ä»¥ä¸Šçš„ React é”™è¯¯å¤„ç†åœºæ™¯ï¼Œæ¯”åŸç”Ÿ ErrorBoundary æ›´çµæ´»å¼ºå¤§ã€‚å»ºè®®åœ¨é¡¹ç›®ä¸­ç»Ÿä¸€ä½¿ç”¨æ­¤åº“æ¥å¤„ç†é”™è¯¯è¾¹ç•Œã€‚",type:"success",showIcon:!0,style:{marginTop:16}})]})]})}}}]);